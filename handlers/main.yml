---
- name: Restart shibboleth
  ansible.builtin.systemd:
    name: shibd
    state: restarted

- name: Restart shibboleth sockets
  when: shibboleth_fastcgi_support_enable | bool or shibboleth_nginx_module_install | bool
  ansible.builtin.systemd:
    name: "{{ item }}"
    state: restarted
  loop:
    - shibauthorizer.socket
    - shibauthorizer.service
    - shibresponder.socket
    - shibresponder.service

- name: Reload nginx
  ansible.builtin.systemd:
    name: nginx
    state: reloaded
